<!DOCTYPE html>
<html lang="es">
  <head>
    <title>%VITE_PANTALLA_SIERVO_NOMBRE%</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="/src/estilos/sos.siervo.css">
  </head>
  <body>

    <!-- MENSAJERO (OSC) DE LA PANTALLA-SIERVO                      -->
    <!-- Intermediario (web socket) entre el siervo y las restantes -->
    <!-- pantallas de la obra. Por un lado, se envían los mensajes  -->
    <!-- de adoración hacia "La Nube" y, por otro lado, se envían   -->
    <!-- las ofrendas digitales a la pantalla de la "Presentalla".  -->
    <!-- vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv -->
    <script src="http://%VITE_CANAL_NUBE_SERVIDOR%:%VITE_CANAL_NUBE_PUERTO%/socket.io/socket.io.js"></script>
    <script src="http://%VITE_CANAL_PRESENTALLA_SERVIDOR%:%VITE_CANAL_PRESENTALLA_PUERTO%/socket.io/socket.io.js"></script>

    <script>
      // Canal de comunicación con "La Nube"
      // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv 
       var socket = io('http://%VITE_CANAL_NUBE_SERVIDOR%:%VITE_CANAL_NUBE_PUERTO%');
       socket.on('connect', function() {
        socket.emit('config',
            {server: {port: 9998,
                     host: '127.0.0.1'
             },
             client: {port: %VITE_MENSAJERO_NUBE_PUERTO%,
                     host: '%VITE_MENSAJERO_NUBE_SERVIDOR%'
              }
            }
        );});
    
      socket.on('message', function(obj) {
        console.log(obj);
      });

      // Canal de comunicación con "La Presentalla"
      // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
       var socket2 = io('http://%VITE_CANAL_PRESENTALLA_SERVIDOR%:%VITE_CANAL_PRESENTALLA_PUERTO%');
       socket2.on('connect', function() {
        socket2.emit('config',
            {server: {port: 9998,
                     host: '127.0.0.1'
             },
             client: {port: %VITE_MENSAJERO_PRESENTALLA_PUERTO%,
                     host: '%VITE_MENSAJERO_PRESENTALLA_SERVIDOR%'
              }
            }
        );});
    
      socket2.on('message', function(obj) {
        console.log(obj);
      });

    </script>
      
    <script type="module" src="/src/obra.js"></script>
        ¡Gloria a la Nube!

    <button onclick="socket.emit('message', '/mensaje/NUBE 1 2 3');">Send /mensaje/NUBE/ 1 2 3</button>
    <button onclick="socket2.emit('message', '/mensaje/PRESENTALLA 1 2 3');">Send /mensaje/PRESENTALLA/ 1 2 3</button>

  </body>
</html>